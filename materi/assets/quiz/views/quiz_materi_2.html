<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Kuis Net Zero Emission â€” GreenMind</title>

    <!-- Icon Website -->
    <link href="../../../../assets/img/logo.png" rel="icon" />

    <link rel="stylesheet" href="../css/quiz.css" />
    <link rel="stylesheet" href="../../css/modal.css" />
    <!-- Progress Manager -->
    <script src="../../../../assets/js/progress-manager.js"></script>
  </head>
  <body>
    <!-- ================= HEADER ================= -->
    <header class="site-header">
      <div class="header-inner">
        <!-- Brand -->
        <a href="../../../../v2.html" class="brand">
          <img
            src="../../../../assets/img/logo.png"
            alt="GreenMind"
            class="logo-img"
          />
          <div class="brand-text">
            <strong>GreenMind</strong>
            <span>Edukasi Lingkungan untuk Pahlawan Bumi Masa Depan</span>
          </div>
        </a>

        <!-- Right Actions -->
        <div class="header-actions">
          <!-- Burger -->
          <button class="nav-toggle" aria-label="Buka menu">
            <span></span><span></span><span></span>
          </button>
        </div>

        <!-- Navigation -->
        <nav class="main-nav">
          <a href="../../../../v2.html" class="nav-link">Beranda</a>
          <a
            data-route="materials"
            href="../../views/daftar_materi.html"
            class="nav-link"
            >Materi</a
          >
          <a href="#" class="nav-link" id="nav-about" data-modal="about"
            >Tentang</a
          >
        </nav>
      </div>
    </header>

    <!-- Modal: Tentang (About) -->
    <div
      class="modal-overlay"
      id="aboutModal"
      aria-hidden="true"
      role="dialog"
      aria-modal="true"
      aria-labelledby="aboutTitle"
    >
      <div class="modal" role="document">
        <button class="modal-close" id="aboutClose" aria-label="Tutup">
          Ã—
        </button>
        <h2 id="aboutTitle">Tentang GreenMind</h2>

        <div class="modal-tabs" role="tablist" aria-label="Tab Tentang">
          <button
            class="tab active"
            data-tab="purpose"
            role="tab"
            aria-selected="true"
          >
            Tujuan
          </button>
          <button
            class="tab"
            data-tab="target"
            role="tab"
            aria-selected="false"
          >
            Target
          </button>
          <button class="tab" data-tab="hopes" role="tab" aria-selected="false">
            Harapan
          </button>
        </div>

        <div class="modal-body">
          <div class="tab-panel" data-panel="purpose">
            <p>
              <strong>GreenMind</strong> adalah platform edukasi interaktif yang
              dirancang untuk memperkenalkan konsep lingkungan dan Net Zero
              dengan cara yang menyenangkan dan mudah dipahami. Melalui
              kombinasi materi singkat, ilustrasi, kuis, dan permainan,
              anak-anak belajar mengapa tindakan sederhana sehari-hari penting
              bagi masa depan bumi.
            </p>
            <ul>
              <li>
                Menyajikan materi ringkas dan visual untuk memudahkan pemahaman.
              </li>
              <li>
                Mendorong pengalaman belajar aktif melalui kuis dan game
                edukasi.
              </li>
              <li>
                Menghubungkan pengetahuan dengan tindakan nyata yang bisa
                dilakukan sehari-hari.
              </li>
            </ul>
          </div>

          <div class="tab-panel" data-panel="target" hidden>
            <p>
              Target utama kami adalah anak usia sekolah dasar hingga remaja,
              serta pendidik dan orang tua yang mencari sumber belajar praktis
              dan interaktif. Konten dibuat ramah usia, inklusif, dan mudah
              disesuaikan untuk kegiatan belajar di kelas atau di rumah.
            </p>
          </div>

          <div class="tab-panel" data-panel="hopes" hidden>
            <p>
              Kami berharap setiap pengguna memperoleh pemahaman dasar tentang
              langkah-langkah sederhana yang dapat mengurangi dampak lingkungan,
              mengembangkan kebiasaan ramah lingkungan, dan terinspirasi untuk
              membagikan pengetahuan ini di komunitasnya. Juga berharap materi
              ini menjadi titik awal proyek sekolah dan diskusi keluarga yang
              bermakna.
            </p>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn white" id="close2">Tutup</button>
        </div>
      </div>
    </div>

    <main id="quiz-app" class="quiz-app" aria-live="polite">
      <header class="quiz-header">
        <h1>Kuis: Mengenal Apa Itu Net Zero Emission</h1>
        <div class="quiz-controls">
          <button id="audioToggle" class="btn small">Suara: On</button>
          <div class="progress" aria-hidden="true">
            <span id="progressText">1 / 10</span>
          </div>
        </div>
      </header>

      <section id="questionWrap" class="card">
        <div id="questionBox" class="question">Memuat soal...</div>
        <div id="choices" class="choices"></div>
        <div class="nav">
          <button id="prev" class="btn soft" disabled>â† Sebelumnya</button>
          <button id="next" class="btn" disabled>Lanjut â†’</button>
        </div>
      </section>

      <section id="result" class="card hidden">
        <h2>Hasil Kuis</h2>
        <p id="scoreText"></p>
        <div id="review"></div>
        <div
          class="actions"
          style="
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
            justify-content: center;
          "
        >
          <a
            href="../../views/daftar_materi.html"
            class="btn"
            style="
              flex: 0 1 calc(33.333% - 0.6rem);
              min-width: 120px;
              text-align: center;
              padding: 0.75rem 0.5rem;
            "
            >ğŸ“š Daftar Materi</a
          >
          <a
            href="../../views/materi_3.html"
            class="btn"
            style="
              flex: 0 1 calc(33.333% - 0.6rem);
              min-width: 120px;
              text-align: center;
              padding: 0.75rem 0.5rem;
            "
            >â­ï¸ Materi Selanjutnya</a
          >
          <button
            id="retry"
            class="btn white"
            style="
              flex: 0 1 calc(33.333% - 0.6rem);
              min-width: 120px;
              text-align: center;
              padding: 0.75rem 0.5rem;
            "
          >
            ğŸ”„ Ulangi Kuis
          </button>
        </div>
      </section>

      <footer class="site-footer">
        <div class="footer-inner">
          <!-- Brand -->
          <div class="footer-brand">
            <strong>GreenMind</strong>
            <p>
              Platform pembelajaran edukatif dan interaktif yang dirancang untuk
              menumbuhkan kesadaran, pengetahuan, dan kepedulian anak-anak
              terhadap lingkungan serta keberlanjutan masa depan Bumi.
            </p>
          </div>

          <!-- Links -->
          <div class="footer-links">
            <strong>Navigasi</strong>
            <a href="../../../../v2.html">Beranda</a>
            <a data-route="materials" href="../../views/daftar_materi.html"
              >Materi</a
            >
            <a href="#" data-modal="about">Tentang</a>
            <a href="../../../../game/game.html">Game Edukasi</a>
          </div>

          <!-- Info -->
          <div class="footer-info">
            <strong>Dukung Kami</strong>
            <p>
              Belajar bersama dan berkontribusi melalui aksi nyata untuk menjaga
              lingkungan yang bersih, sehat, dan berkelanjutan.
            </p>
            <small>Â© 2025 GreenMind</small>
            <small
              >Made by
              <a href="https://polmind.ac.id/" target="_blank"
                >Politeknik Mitra Industri</a
              ></small
            >
          </div>
        </div>
      </footer>
    </main>

    <!-- Backsound saja (letakkan background.mp3 di folder sound/) -->
    <audio
      id="bgAudio"
      src="../../sound/backsound.mp3"
      loop
      preload="auto"
    ></audio>

    <script src="../js/quiz_2.js"></script>

    <!-- GSAP (used for modal animation). Fallback handled in script. -->
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

    <script>
      (() => {
        const toggle = document.querySelector(".nav-toggle");
        const nav = document.querySelector(".main-nav");

        if (toggle && nav) {
          toggle.addEventListener("click", () => {
            nav.classList.toggle("active");
          });
        }
      })();
    </script>
    <script>
      (function () {
        const triggers = Array.from(
          document.querySelectorAll('[data-modal="about"]')
        );
        const modal = document.getElementById("aboutModal");
        const closeBtn = document.getElementById("aboutClose");
        const closeBtn2 = document.getElementById("close2");
        const learnMore = document.getElementById("learnMore");
        const tabs = Array.from(document.querySelectorAll(".modal-tabs .tab"));
        const panels = Array.from(document.querySelectorAll(".tab-panel"));

        if (!modal || !triggers.length) return;

        function openModal() {
          modal.setAttribute("aria-hidden", "false");
          modal.style.display = "block";
          document.body.style.overflow = "hidden";
          const inner = modal.querySelector(".modal");
          if (typeof gsap !== "undefined") {
            gsap.fromTo(
              inner,
              { y: 24, opacity: 0, scale: 0.98 },
              { y: 0, opacity: 1, scale: 1, duration: 0.45, ease: "power3.out" }
            );
          } else {
            inner.style.opacity = 1;
            inner.style.transform = "translateY(0) scale(1)";
          }
          // focus first tabbable
          setTimeout(() => {
            const btn = modal.querySelector(".tab");
            if (btn) btn.focus();
          }, 250);
          document.addEventListener("keydown", onKey);
        }

        function closeModal() {
          modal.setAttribute("aria-hidden", "true");
          document.body.style.overflow = "";
          const inner = modal.querySelector(".modal");
          if (typeof gsap !== "undefined") {
            gsap.to(inner, {
              y: 12,
              opacity: 0,
              scale: 0.98,
              duration: 0.28,
              ease: "power2.in",
              onComplete() {
                modal.style.display = "none";
              },
            });
          } else {
            modal.style.display = "none";
          }
          document.removeEventListener("keydown", onKey);
        }

        function onKey(e) {
          if (e.key === "Escape") closeModal();
          // simple Tab trap
          if (e.key === "Tab") {
            const focusables = modal.querySelectorAll(
              'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            if (!focusables.length) return;
            const first = focusables[0];
            const last = focusables[focusables.length - 1];
            if (e.shiftKey && document.activeElement === first) {
              e.preventDefault();
              last.focus();
            } else if (!e.shiftKey && document.activeElement === last) {
              e.preventDefault();
              first.focus();
            }
          }
        }

        triggers.forEach((btn) => {
          btn.addEventListener("click", (ev) => {
            ev.preventDefault();
            openModal();
          });
        });

        closeBtn.addEventListener("click", closeModal);
        if (closeBtn2) closeBtn2.addEventListener("click", closeModal);

        modal.addEventListener("click", (e) => {
          if (e.target === modal) closeModal();
        });

        // Tabs interaksi
        tabs.forEach((t) => {
          t.addEventListener("click", () => {
            const key = t.getAttribute("data-tab");
            tabs.forEach((x) => {
              x.classList.toggle("active", x === t);
              x.setAttribute("aria-selected", x === t ? "true" : "false");
            });
            panels.forEach((p) => {
              const show = p.getAttribute("data-panel") === key;
              if (show) {
                p.hidden = false;
                gsap.fromTo(
                  p,
                  { y: 8, opacity: 0 },
                  { y: 0, opacity: 1, duration: 0.35, ease: "power2.out" }
                );
              } else {
                p.hidden = true;
              }
            });
          });
        });

        learnMore &&
          learnMore.addEventListener("click", () => {
            // contoh: scroll ke bagian materi atau buka halaman baru
            closeModal();
            const el = document.querySelector('[data-route="materials"]');
            if (el) el.click();
          });
      })();
    </script>

    <!-- Mark Quiz as Completed -->
    <script>
      (() => {
        const appEl = document.getElementById("quiz-app");
        const observer = new MutationObserver(() => {
          if (appEl.querySelector(".quiz-card.result")) {
            ProgressManager.markQuizCompleted(2);
            observer.disconnect();
          }
        });
        observer.observe(appEl, { childList: true, subtree: true });
      })();
    </script>
  </body>
</html>
